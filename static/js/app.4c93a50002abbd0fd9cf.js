webpackJsonp([1],{"+skl":function(e,t){},"6mSI":function(e,t){},GQY0:function(e,t){},Iakc:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("7+uW"),r={data:function(){return{isCollapse:!0}},methods:{handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)},goPage:function(e){this.$router.push(e)}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"tac"},[a("el-col",{staticClass:"sidebar-col",attrs:{span:12}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2","background-color":"#515a6e","text-color":"#fff"},on:{open:e.handleOpen,close:e.handleClose}},[a("el-menu-item",{attrs:{index:"2"},on:{click:function(t){return e.goPage("/manage/goods")}}},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("\n          商品列表\n        ")])]),e._v(" "),a("el-menu-item",{attrs:{index:"3"},on:{click:function(t){return e.goPage("/manage/stores")}}},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("店铺列表")])])],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(r,s,!1,function(e){a("Iakc")},"data-v-68532859",null).exports,i={name:"App",components:{siderBar:o}},l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("div",{staticClass:"layout"},[t("Layout",[t("keep-alive",[this.$route.meta.keepAlive?t("router-view"):this._e()],1),this._v(" "),this.$route.meta.keepAlive?this._e():t("router-view")],1)],1)])},staticRenderFns:[]};var c,u=a("VU/8")(i,l,!1,function(e){a("WiSC")},null,null).exports,p=a("mvHQ"),d=a.n(p),f=a("Xxa5"),h=a.n(f),m=a("exGp"),g=a.n(m),v=a("lbHh"),w=a.n(v),b=a("pFYg"),_=a.n(b),y=a("//Fk"),k=a.n(y),C=a("fZjL"),x=a.n(C),S=this,M=(c=g()(h.a.mark(function e(){var t,a,n,r,s,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"fetch";return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",l=l.toUpperCase(),o=t+o,"GET"===l&&(a="",x()(i).forEach(function(e){a+=e+"="+i[e]+"&"}),""!==a&&(a=a.substr(0,a.lastIndexOf("&")),o=o+"?"+a)),!window.fetch||"fetch"!==c){e.next=26;break}return n={credentials:"include",method:l,headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":w.a.get("csrftoken")},mode:"cors",cache:"default"},"POST"!==l&&"PUT"!==l||Object.defineProperty(n,"body",{value:d()(i.data)}),e.prev=7,e.next=10,fetch(o,n);case 10:if(200!==(r=e.sent).status){e.next=18;break}return e.next=14,r.json();case 14:return s=e.sent,e.abrupt("return",s);case 18:return e.abrupt("return",!1);case 19:e.next=24;break;case 21:throw e.prev=21,e.t0=e.catch(7),new Error(e.t0);case 24:e.next=27;break;case 26:return e.abrupt("return",new k.a(function(e,t){var a=void 0;window.XMLHttpRequest&&(a=new XMLHttpRequest);var n="";"POST"===l&&(n=d()(i)),a.open(l,o,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send(n),a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status){var n=a.response;"object"!==(void 0===n?"undefined":_()(n))&&(n=JSON.parse(n)),e(n)}else t(a)}}));case 27:case"end":return e.stop()}},e,S,[[7,21]])})),function(){return c.apply(this,arguments)}),P={data:function(){return{showList:!1,loginMessage:"",useList:"",loginData:{acct:"",pass:""},ruleValidate:{acct:[{required:!0,message:"账号不能为空",trigger:"blur"},{min:3,max:16,message:"账号长度3-16个字符",trigger:"blur"}],pass:[{required:!0,message:"密码不能为空",trigger:"blur"},{type:"string",min:6,max:16,message:"密码长度6-16个字符",trigger:"blur"}]}}},mounted:function(){w.a.get("isLogin")&&this.globalMethod.reWriteUrl(this.$router)},methods:{handleSubmit:function(){var e=this;return g()(h.a.mark(function t(){var a,n;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.globalMethod.showLoading("登录中"),a={account:e.loginData.acct,password:e.loginData.pass},t.next=4,M("/staff/admin/login/",{data:a},"POST");case 4:n=t.sent,e.globalMethod.destroyShow(),n?(e.$router.push("manage"),e.globalMethod.showSuccess("登录成功")):e.globalMethod.showError("登录失败");case 7:case"end":return t.stop()}},t,e)}))()},registAcount:function(){this.$router.push("register")},handleReset:function(e){this.$refs[e].resetFields()},getTenantMessage:function(){var e=this;this.axios({method:"GET",url:"/api/user/getUserInfo",headers:{token:w.a.get("token")}}).then(function(t){e.globalMethod.dealResponse(t,function(a){e.useList=t.data.entity,e.globalMethod.setUserInfo(d()(e.useList)),e.globalMethod.reWriteUrl(e.$router)})})}}},L={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[e._m(0),e._v(" "),a("div",{staticClass:"from-wrap"},[a("h2",[e._v("登录")]),e._v(" "),e.showList?a("Alert",{staticStyle:{width:"90%","margin-left":"10%"},attrs:{type:"error"}},[e._v(e._s(e.loginMessage))]):e._e(),e._v(" "),a("Form",{ref:"loginData",attrs:{model:e.loginData,rules:e.ruleValidate,"label-width":80},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit("loginData")}}},[a("FormItem",{attrs:{label:"账号",prop:"acct"}},[a("Input",{attrs:{type:"text",placeholder:"请输入账号"},model:{value:e.loginData.acct,callback:function(t){e.$set(e.loginData,"acct",t)},expression:"loginData.acct"}})],1),e._v(" "),a("FormItem",{attrs:{label:"密码",prop:"pass"}},[a("Input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.loginData.pass,callback:function(t){e.$set(e.loginData,"pass",t)},expression:"loginData.pass"}})],1),e._v(" "),a("FormItem",{staticClass:"form-footer"},[a("Button",{attrs:{type:"primary",long:""},on:{click:function(t){return e.handleSubmit()}}},[e._v("登录")])],1)],1)],1),e._v(" "),e._m(1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("h1",[this._v("莲花商场后台管理")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"bottom"},[t("p",[this._v("归属：莲花之家")])])}]};var $={path:"/",name:"login",component:a("VU/8")(P,L,!1,function(e){a("b5dH")},null,null).exports,meta:{title:"登录"}},T={data:function(){return{showUserInfo:!1,tenantList:JSON.parse(localStorage.getItem("user_info")),showMessage:!1,showLogout:!1,showPasswordChange:!1,passwordChange:{oldPassword:"",newPassword:"",newPasswordCheck:""},rulePasswordChange:{oldPassword:[{required:!0,message:"请填写原密码",trigger:"blur"}],newPassword:[{required:!0,message:"请填写新密码",trigger:"blur"},{type:"string",min:6,max:16,message:"密码长度6-16个字符",trigger:"blur"}],newPasswordCheck:[{required:!0,message:"请填写确认密码",trigger:"blur"},{type:"string",min:6,max:16,message:"密码长度6-16个字符",trigger:"blur"}]}}},created:function(){},methods:{showMessageFun:function(){this.showMessage=!this.showMessage},logout:function(){var e=this;return g()(h.a.mark(function t(){return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M("/staff/admin/logout/",{},"GET");case 2:t.sent&&e.$router.push("/");case 4:case"end":return t.stop()}},t,e)}))()},changePassword:function(e){var t=this;this.$refs[e].validate(function(e){if(e)if(t.passwordChange.newPassword===t.passwordChange.newPasswordCheck){var a=t,n=a.passwordChange;a.globalMethod.showLoading("正在修改"),a.axios.post("/api/user/updatePassword",n).then(function(e){a.globalMethod.dealResponse(e,function(){a.globalMethod.showSuccess("修改成功!"),a.showPasswordChange=!1,a.logout()})})}else t.$Message.error("确认密码填写错误");else t.$Message.error("请填写完整表单")})}}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Header",[a("Menu",{attrs:{mode:"horizontal",theme:"dark","active-name":"1"}},[a("div",{staticClass:"layout-nav",style:{float:"right"}},[a("MenuItem",{attrs:{name:"5"}},[a("div",{on:{click:function(t){e.showPasswordChange=!0}}},[a("Icon",{style:{marginRight:"6px"},attrs:{type:"ios-key",title:"密码修改"}}),e._v(" "),a("span",[e._v("密码修改")])],1)]),e._v(" "),a("MenuItem",{attrs:{name:"6"}},[a("div",{on:{click:function(t){e.showLogout=!0}}},[a("Icon",{style:{marginRight:"6px"},attrs:{type:"ios-log-out",title:"注销"}}),e._v(" "),a("span",[e._v("\n            注销")])],1)])],1)])],1),e._v(" "),a("Modal",{attrs:{title:"注销",width:"20%"},model:{value:e.showLogout,callback:function(t){e.showLogout=t},expression:"showLogout"}},[e._v("\n    是否注销当前用户?\n    "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"default"},on:{click:function(t){e.showLogout=!1}}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"info"},on:{click:function(t){e.showLogout=!1,e.logout()}}},[e._v("确定")])],1)]),e._v(" "),a("Modal",{attrs:{title:"密码修改",width:"40%"},model:{value:e.showPasswordChange,callback:function(t){e.showPasswordChange=t},expression:"showPasswordChange"}},[a("Row",[a("Form",{ref:"passwordChange",attrs:{"label-position":"right","label-width":100,model:e.passwordChange,rules:e.rulePasswordChange}},[a("Row",[a("Col",{attrs:{span:"16"}},[a("FormItem",{attrs:{label:"原密码",prop:"oldPassword"}},[a("Input",{attrs:{type:"password",placeholder:"原密码"},model:{value:e.passwordChange.oldPassword,callback:function(t){e.$set(e.passwordChange,"oldPassword",t)},expression:"passwordChange.oldPassword"}})],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"16"}},[a("FormItem",{attrs:{label:"新密码",prop:"newPassword"}},[a("Input",{attrs:{type:"password",placeholder:"新密码"},model:{value:e.passwordChange.newPassword,callback:function(t){e.$set(e.passwordChange,"newPassword",t)},expression:"passwordChange.newPassword"}})],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"16"}},[a("FormItem",{attrs:{label:"确认密码",prop:"newPassword"}},[a("Input",{attrs:{type:"password",placeholder:"确认密码"},model:{value:e.passwordChange.newPasswordCheck,callback:function(t){e.$set(e.passwordChange,"newPasswordCheck",t)},expression:"passwordChange.newPasswordCheck"}})],1)],1)],1)],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"default"},on:{click:function(t){e.showPasswordChange=!1}}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"info"},on:{click:function(t){return e.changePassword("passwordChange")}}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]};var z={components:{tenantHeader:a("VU/8")(T,E,!1,function(e){a("fUwT")},null,null).exports,siderBar:o},mounted:function(){this.$router.push("/manage/goods")}},F={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("tenant-header"),this._v(" "),t("div",{staticStyle:{display:"flex"}},[t("sider-bar"),this._v(" "),t("keep-alive",[t("router-view")],1)],1)],1)},staticRenderFns:[]};var R=a("VU/8")(z,F,!1,function(e){a("rZLD")},"data-v-72c99a9a",null).exports,A=function(e,t){return M("/staff/store/?page="+e+"&page_size="+t,{},"GET")},D=function(e){return M("/staff/store/"+e,{},"DELETE")},I=function(e,t){return M("/staff/store/"+e+"/",{data:t},"PUT")},U={data:function(){return{form:{name:"",logo:"",address_info:"",tel:"",wechat:"",desc:"",image:""},QiniuData:{key:"",token:""}}},mounted:function(){this.params.name&&(this.form=this.params),this.getToken()},methods:{onSubmit:function(){var e=this;return g()(h.a.mark(function t(){var a;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=void 0,e.params.name){t.next=7;break}return t.next=4,n=e.form,M("/staff/store/",{data:n},"POST");case 4:a=t.sent,t.next=10;break;case 7:return t.next=9,I(e.params.id,e.form);case 9:a=t.sent;case 10:a?(e.$message.success("操作成功!"),e.$emit("show",!1)):e.$message.error("操作失败!");case 11:case"end":return t.stop()}var n},t,e)}))()},handleAvatarSuccess:function(e,t){this.$set(this.form,"logo","http://lhxq.top/"+e.key)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),this.QiniuData.key=""+e.name,t&&a},back:function(){this.$emit("show",!1)},getToken:function(){var e=this;return g()(h.a.mark(function t(){var a;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M("/qiniutoken/",{},"GET");case 2:a=t.sent,e.QiniuData.token=a.data.token;case 4:case"end":return t.stop()}},t,e)}))()}},props:["params"]},O={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper-view"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:""}}},[a("span",{on:{click:e.back}},[e._v("店铺列表")])]),e._v(" "),a("el-breadcrumb-item",[e._v("创建店铺")])],1),e._v(" "),a("el-form",{ref:"form",staticClass:"el-form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"店铺名称"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传图片"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://upload-z2.qiniup.com","show-file-list":!1,"list-type":"picture",data:e.QiniuData,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.form.logo?a("img",{staticClass:"avatar",attrs:{src:e.form.logo}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"店铺地址"}},[a("el-input",{model:{value:e.form.address_info,callback:function(t){e.$set(e.form,"address_info",t)},expression:"form.address_info"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式"}},[a("el-input",{model:{value:e.form.tel,callback:function(t){e.$set(e.form,"tel",t)},expression:"form.tel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商家微信"}},[a("el-input",{model:{value:e.form.wechat,callback:function(t){e.$set(e.form,"wechat",t)},expression:"form.wechat"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"店铺简介"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.back}},[e._v("返回")])],1)],1)],1)},staticRenderFns:[]};var H={data:function(){return{List:[],pagination:{currentPage:1,total:0,pageSize:5},showCreate:!1,params:{}}},created:function(){},mounted:function(){this.getList(this.pagination.currentPage,this.pagination.pageSize)},activated:function(){this.getList(this.pagination.currentPage,this.pagination.pageSize)},methods:{getList:function(e,t){var a=this;return g()(h.a.mark(function n(){var r;return h.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,A(e,t);case 2:r=n.sent,a.pagination.total=r.data.count,a.List=r.data.results;case 5:case"end":return n.stop()}},n,a)}))()},deleteStore_:function(e){var t=this;return g()(h.a.mark(function a(){return h.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,D(e);case 2:a.sent&&t.getList(t.pagination.currentPage,t.pagination.pageSize);case 4:case"end":return a.stop()}},a,t)}))()},createStore:function(){this.$router.push("/manage/stores/create")},handleSizeChange:function(e){this.getList(this.pagination.currentPage,e)},handleCurrentChange:function(e){this.getList(e,this.pagination.pageSize)},deleteEntity:function(e){var t=this;this.$confirm("确认删除？").then(function(a){t.deleteStore_(e)}).catch(function(e){})},showFunc:function(){this.getList(this.pagination.currentPage,this.pagination.pageSize),this.showCreate=!1,this.params={}},edit:function(e){this.showCreate=!0,this.params=e}},components:{createStore:a("VU/8")(U,O,!1,function(e){a("XA4e")},"data-v-5bd24978",null).exports}},V={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper-view"},[e.showCreate?e._e():a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showCreate=!0}}},[e._v("创建店铺\n    ")]),e._v(" "),a("div",{staticStyle:{"min-height":"75vh"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.List}},[a("el-table-column",{attrs:{prop:"name",label:"店铺名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"logo",label:"店铺logo"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{attrs:{src:e.row.logo,"min-width":"70",height:"70"}})]}}],null,!1,4045306653)}),e._v(" "),a("el-table-column",{attrs:{prop:"address_info",label:"店铺地址",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tel",label:"联系方式"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wechat",label:"商家微信"}}),e._v(" "),a("el-table-column",{attrs:{prop:"create_at",label:"创建时间",formatter:this.globalMethod.dateFormat}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.deleteEntity(t.row.id)}}},[e._v("删除")])]}}],null,!1,1211275641)})],1)],1),e._v(" "),a("el-pagination",{attrs:{background:"","current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize,layout:"total, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),e.showCreate?a("create-store",{attrs:{params:e.params},on:{show:e.showFunc}}):e._e()],1)},staticRenderFns:[]},q={path:"stores",component:a("VU/8")(H,V,!1,null,null,null).exports,meta:{title:"店铺列表",keepAlive:!1},children:[]},G=a("BO1k"),N=a.n(G),j=function(e,t){return M("/staff/product/?page="+e+"&pageSize="+t,{},"GET")},B=function(e){return M("/staff/product/"+e,{},"DELETE")},Q=function(e,t){return M("/staff/product/"+e+"/",{data:t},"PUT")},W=function(e){return M("/staff/product/"+e+"/set_on_shelf/",{},"POST")},J=function(e){return M("/staff/product/"+e+"/set_off_shelf/",{},"POST")},X={data:function(){return{form:{store:"",name:"",price:"",unit:"",detail:"",images:""},List:[],QiniuData:{key:"",token:""},dialogVisible:!1,dialogImageUrl:[],fileList:[]}},mounted:function(){if(this.getList(),this.getToken(),this.params.name){this.form=this.params;var e=this.params.images.split(",");if(e.length){var t=!0,a=!1,n=void 0;try{for(var r,s=N()(e);!(t=(r=s.next()).done);t=!0){var o=r.value;o&&this.fileList.push({url:o})}}catch(e){a=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw n}}}}},methods:{onSubmit:function(){var e=this;return g()(h.a.mark(function t(){var a,n,r,s,o,i,l;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(e.form.images="",a=!0,n=!1,r=void 0,t.prev=4,s=N()(e.fileList);!(a=(o=s.next()).done);a=!0)i=o.value,e.form.images+=i.url+",";t.next=12;break;case 8:t.prev=8,t.t0=t.catch(4),n=!0,r=t.t0;case 12:t.prev=12,t.prev=13,!a&&s.return&&s.return();case 15:if(t.prev=15,!n){t.next=18;break}throw r;case 18:return t.finish(15);case 19:return t.finish(12);case 20:if(l=void 0,e.params.name){t.next=27;break}return t.next=24,c=e.form,M("/staff/product/",{data:c},"POST");case 24:l=t.sent,t.next=30;break;case 27:return t.next=29,Q(e.params.id,e.form);case 29:l=t.sent;case 30:l?(e.$message.success("操作成功!"),e.$emit("show",!1)):e.$message.error("操作失败!");case 31:case"end":return t.stop()}var c},t,e,[[4,8,12,20],[13,,15,19]])}))()},getList:function(){var e=this;return g()(h.a.mark(function t(){var a;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M("/staff/store/",{},"GET");case 2:a=t.sent,e.List=a.data.results;case 4:case"end":return t.stop()}},t,e)}))()},handleRemove:function(e,t){console.log(e,t),this.fileList=t},handleChange:function(e,t){console.log(t)},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("上传头像图片大小不能超过 2MB!"),this.QiniuData.key=""+e.name,t},handlePictureCardPreview:function(e){this.dialogVisible=!0},handleAvatarSuccess:function(e,t){var a="http://lhxq.top/"+e.key;this.fileList.push({url:a})},back:function(){this.$emit("show",!1)},getToken:function(){var e=this;return g()(h.a.mark(function t(){var a;return h.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M("/qiniutoken/",{},"GET");case 2:a=t.sent,e.QiniuData.token=a.data.token;case 4:case"end":return t.stop()}},t,e)}))()}},props:["params"]},Y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper-view"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:""}}},[a("span",{on:{click:e.back}},[e._v("商品列表")])]),e._v(" "),a("el-breadcrumb-item",[e._v("创建商品")])],1),e._v(" "),a("el-form",{ref:"form",staticClass:"el-form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"商品名称"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"商品名称"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.store,callback:function(t){e.$set(e.form,"store",t)},expression:"form.store"}},e._l(e.List,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"产品价格"}},[a("el-input",{attrs:{type:"number"},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"规格"}},[a("el-input",{model:{value:e.form.unit,callback:function(t){e.$set(e.form,"unit",t)},expression:"form.unit"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传图片"}},[a("el-upload",{attrs:{action:"http://upload-z2.qiniup.com","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,data:e.QiniuData,"file-list":e.fileList,"on-change":e.handleChange}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}})],1),e._v(" "),a("el-form-item",{attrs:{label:"产品详情"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.detail,callback:function(t){e.$set(e.form,"detail",t)},expression:"form.detail"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:e.back}},[e._v("返回")])],1)],1)],1)},staticRenderFns:[]};var Z={data:function(){return{List:[],pagination:{currentPage:1,total:0,pageSize:5},showCreate:!1,params:{}}},created:function(){},mounted:function(){this.getList(this.pagination.currentPage,this.pagination.pageSize)},activated:function(){this.getList(this.pagination.currentPage,this.pagination.pageSize)},methods:{getList:function(e,t){var a=this;return g()(h.a.mark(function n(){var r,s,o,i,l,c,u;return h.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j(e,t);case 2:for(r=n.sent,a.List=r.data.results,s=!0,o=!1,i=void 0,n.prev=7,l=N()(a.List);!(s=(c=l.next()).done);s=!0)(u=c.value).imageArr=u.images.split(",");n.next=15;break;case 11:n.prev=11,n.t0=n.catch(7),o=!0,i=n.t0;case 15:n.prev=15,n.prev=16,!s&&l.return&&l.return();case 18:if(n.prev=18,!o){n.next=21;break}throw i;case 21:return n.finish(18);case 22:return n.finish(15);case 23:a.pagination.total=r.data.count;case 24:case"end":return n.stop()}},n,a,[[7,11,15,23],[16,,18,22]])}))()},deleteGood_:function(e){var t=this;return g()(h.a.mark(function a(){return h.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,B(e);case 2:a.sent&&t.getList(t.pagination.currentPage,t.pagination.pageSize);case 4:case"end":return a.stop()}},a,t)}))()},handleSizeChange:function(e){this.getList(this.pagination.currentPage,e)},handleCurrentChange:function(e){console.log(e),this.getList(e,this.pagination.pageSize)},deleteEntity:function(e){var t=this;this.$confirm("确认删除？").then(function(a){t.deleteGood_(e)}).catch(function(e){})},showFunc:function(){this.getList(this.pagination.currentPage,this.pagination.pageSize),this.showCreate=!1,this.params={}},edit:function(e){this.showCreate=!0,this.params=e},goodUp:function(e){var t=this;return g()(h.a.mark(function a(){return h.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,W(e);case 2:a.sent?t.globalMethod.showSuccess("上架成功"):t.globalMethod.showError("上架失败"),t.getList(t.pagination.currentPage,t.pagination.pageSize);case 5:case"end":return a.stop()}},a,t)}))()},goodDown:function(e){var t=this;return g()(h.a.mark(function a(){return h.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,J(e);case 2:a.sent?t.globalMethod.showSuccess("下架成功"):t.globalMethod.showError("下架失败"),t.getList(t.pagination.currentPage,t.pagination.pageSize);case 5:case"end":return a.stop()}},a,t)}))()}},components:{createGood:a("VU/8")(X,Y,!1,function(e){a("GQY0")},"data-v-8faecc22",null).exports}},K={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper-view"},[e.showCreate?e._e():a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showCreate=!0}}},[e._v("创建商品\n    ")]),e._v(" "),a("div",{staticStyle:{"min-height":"75vh"}},[a("el-table",{attrs:{data:e.List}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"商品图片"}},e._l(t.row.imageArr,function(e){return a("img",{staticClass:"good-img",attrs:{src:e,width:"70"}})}),0)],1),e._v(" "),a("el-form",[a("el-form-item",{attrs:{label:"商品详细"}},[a("span",[e._v(e._s(t.row.detail))])])],1)]}}],null,!1,620231201)}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"商品名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"create_at",label:"创建时间",formatter:this.globalMethod.dateFormat}}),e._v(" "),a("el-table-column",{attrs:{prop:"view_total",label:"商品个数"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button-group",[0===t.row.status?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.goodUp(t.row.id)}}},[e._v("上架")]):e._e(),e._v(" "),1===t.row.status?a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){return e.goodDown(t.row.id)}}},[e._v("下架")]):e._e()],1),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.deleteEntity(t.row.id)}}},[e._v("删除")])]}}],null,!1,184321602)})],1)],1),e._v(" "),a("el-pagination",{attrs:{background:"","current-page":e.pagination.currentPage,"page-size":e.pagination.pageSize,layout:"total, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),e.showCreate?a("create-good",{attrs:{params:e.params},on:{show:e.showFunc}}):e._e()],1)},staticRenderFns:[]};var ee=[];[$,{path:"/manage",component:R,meta:{title:"管理员"},children:[{path:"goods",component:a("VU/8")(Z,K,!1,function(e){a("6mSI")},"data-v-48a7eef0",null).exports,meta:{title:"商品列表"},children:[]},q]}].forEach(function(e,t){e&&e.path&&ee.push(e)});var te=ee,ae=a("zL8q"),ne=a.n(ae),re=(a("+skl"),a("tvR6"),a("BTaQ")),se=a.n(re),oe=a("mtWM"),ie=a.n(oe),le=a("Rf8U"),ce=a.n(le),ue=a("/ocq"),pe=a("2cg0"),de=a.n(pe),fe=new n.default({data:function(){return{chars:["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]}},methods:{initPage:function(e,t){return(t=t||{}).pageSize=e.pageSize,t.pageNum=e.pageNum,t},dealResponse:function(e,t,a){((a=a||{}).destroyMessage||void 0===a.destroyMessage)&&this.destroyShow(),e.data.success?(a.destroySuccessMessage&&this.destroyShow(),(a.showSuccess||a.showAlert)&&this.showSuccess(a.successMessage||e.data.msg||"操作成功"),t&&t(e.data.entity)):(a.destroyFailMessage&&this.destroyShow(),(a.showError||a.showAlert||void 0===a.showError)&&this.showError(a.errorMessage||e.data.msg||"操作失败"),a.failCallback&&a.failCallback(e.data))},showLoading:function(e,t){t=t||{},this.$Message.loading(de()({content:e||"加载中",duration:0},t))},showError:function(e,t){t=t||{},this.$Message.error(de()({content:e||"操作失败",duration:1.5},t))},showWarning:function(e,t){t=t||{},this.$Message.warning(de()({content:e||"操作有误",duration:1.5},t))},showInfo:function(e,t){t=t||{},this.$Message.info(de()({content:e||"提示",duration:1.5},t))},showSuccess:function(e,t){t=t||{},this.$Message.success(de()({content:e||"操作成功",duration:1.5},t))},destroyShow:function(){this.$Message.destroy()},deepCopy:function(e){return JSON.parse(d()(e))},keyCopy:function(e,t){if(t=t||{},"object"!==(void 0===e?"undefined":_()(e)))return t;for(var a in e)t[a+""]=e[a+""]},timeFormatFun:function(e,t){var a=new Date(e),n=function(e){return(e<10?"0":"")+e};return t.replace(/yyyy|MM|dd|HH|mm|ss/g,function(e){switch(e){case"yyyy":return n(a.getFullYear());case"MM":return n(a.getMonth()+1);case"mm":return n(a.getMinutes());case"dd":return n(a.getDate());case"HH":return n(a.getHours());case"ss":return n(a.getSeconds())}})},downloadFile:function(e){window.open("/api/attach/download/"+e,"_self")},downloadFileByUrl:function(e){window.open(e,"_self")},uploadFile:function(e,t,a){a=a||"file",t=t||"/api/uploadEnclosure";var n=new FormData;if(e instanceof Array)for(var r in e)n.append(a,e[r]);else n.append(a,e);return this.axios.post(t,n,{headers:{"Content-Type":"multipart/form-data"}})},setUserInfo:function(e){localStorage.clear(),sessionStorage.clear(),localStorage.setItem("user_info",e)},destroyUser:function(e,t){t=t||"router",e=e||this.$router,localStorage.removeItem("user_info"),w.a.remove("userId"),w.a.remove("isLogin"),"router"===t?e.push({path:"/"}):e("/")},reWriteUrl:function(e,t){if(t=t||"router",e=e||this.$router,localStorage.getItem("user_info")){var a=JSON.parse(localStorage.getItem("user_info")).roles[0].roleCode||"";this.globalMethod.destroyShow(),this.globalMap.operationRoleMap.tenant.code.indexOf(a)>-1?"router"===t?e.push("/tenant/systemAssetList"):e("/tenant/systemAssetList"):this.globalMap.operationRoleMap.operation.code.indexOf(a)>-1?"router"===t?e.push("/operation/systemAssetList"):e("/operation/systemAssetList"):this.globalMap.operationRoleMap.maintain.code.indexOf(a)>-1&&("router"===t?e.push("/maintain/workbench/datashareimport"):e("/maintain/workbench/datashareimport"))}else this.destroyUser(e,t)},generateMixed:function(e){for(var t="",a=0;a<e;a++){var n=Math.ceil(35*Math.random());t+=this.chars[n]}return t},getDefaultRegistrationData:function(e){return this.globalMethod.deepCopy({file:[],fieldAddType:"field",infomationItems:e?[{time:0,zhName:"",enName:"",itemDescribe:"",objectType:"人员类",dataType:"VARCHAR",dataLength:1,isDictionary:"否",isNull:"是",isPrimary:"否",defaultValue:"",sharingType:"有条件共享",sharingCondition:"",sharingModeType:"共享平台",sharingMode:"接口",sharingModeTemp:["接口","数据库"],isOpen:"是",openCondition:""}]:[],infoResName:"",infoResFormatType:"数据库",infoResFormatValue:"mysql",topicType:"",topicTypeTemp:[],keyAreaType:"",keyAreaTypeTemp:[],systemName:"",sharingType:"有条件共享",sharingCondition:"",sharingModeType:"共享平台",sharingModeTypeTemp:["共享平台"],sharingMode:"接口,数据库",sharingModeTemp:["接口","数据库"],isOpen:"是",openCondition:"",updateCycle:"每日",relationResourceCode:""})},turnObjToArray:function(e){var t=[];for(var a in e)t.push(e[a+""]);return t},checkAdmin:function(){var e=JSON.parse(localStorage.getItem("user_info")),t=e.roles[0].privileges;if(e){var a=!1;return t.forEach(function(e,t,n){a="cmp_edit_all"==e.privilegeCode&&!a}),a}return!1},dateFormat:function(e,t,a,n){if(null!=e[t.property]){var r=new Date(a);return r.getFullYear()+"/"+(r.getMonth()+1)+"/"+r.getDate()+" "+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds()}}}});n.default.use(ce.a,ie.a),n.default.config.productionTip=!1,n.default.use(ne.a),n.default.use(se.a),n.default.use(ue.a),n.default.prototype.globalMethod=fe,n.default.prototype.Cookies=w.a;var he=new ue.a({routes:te});new n.default({router:he,components:{App:u},template:"<App/>"}).$mount("#app")},WiSC:function(e,t){},XA4e:function(e,t){},b5dH:function(e,t){},fUwT:function(e,t){},rZLD:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.4c93a50002abbd0fd9cf.js.map