webpackJsonp([1],{"+cgv":function(t,e){},"+skl":function(t,e){},"3f40":function(t,e){},"4qOc":function(t,e){},MyGt:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),r={data:function(){return{isCollapse:!0}},methods:{handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)},goPage:function(t){this.$router.push(t)}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"tac"},[a("el-col",{staticClass:"sidebar-col",attrs:{span:12}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2","background-color":"#515a6e","text-color":"#fff"},on:{open:t.handleOpen,close:t.handleClose}},[a("el-menu-item",{attrs:{index:"2"},on:{click:function(e){return t.goPage("/manage/goods")}}},[a("i",{staticClass:"el-icon-menu"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("\n          商品列表\n        ")])]),t._v(" "),a("el-menu-item",{attrs:{index:"3"},on:{click:function(e){return t.goPage("/manage/stores")}}},[a("i",{staticClass:"el-icon-menu"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("店铺列表")])]),t._v(" "),a("el-menu-item",{attrs:{index:"4"},on:{click:function(e){return t.goPage("/manage/adverts")}}},[a("i",{staticClass:"el-icon-menu"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("广告列表")])]),t._v(" "),a("el-menu-item",{attrs:{index:"5"},on:{click:function(e){return t.goPage("/manage/goodstags")}}},[a("i",{staticClass:"el-icon-menu"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("商品标签")])]),t._v(" "),a("el-menu-item",{attrs:{index:"6"},on:{click:function(e){return t.goPage("/manage/tags")}}},[a("i",{staticClass:"el-icon-menu"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("店铺标签")])])],1)],1)],1)},staticRenderFns:[]};var o=a("VU/8")(r,s,!1,function(t){a("s8cc")},"data-v-64978d58",null).exports,i={name:"App",components:{siderBar:o}},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"layout"},[e("Layout",[e("keep-alive",[this.$route.meta.keepAlive?e("router-view"):this._e()],1),this._v(" "),this.$route.meta.keepAlive?this._e():e("router-view")],1)],1)])},staticRenderFns:[]};var c,u=a("VU/8")(i,l,!1,function(t){a("WiSC")},null,null).exports,d=a("mvHQ"),p=a.n(d),f=a("Xxa5"),m=a.n(f),h=a("exGp"),g=a.n(h),v=a("lbHh"),_=a.n(v),w=a("pFYg"),b=a.n(w),y=a("//Fk"),k=a.n(y),x=a("fZjL"),C=a.n(x),S=this,L=(c=g()(m.a.mark(function t(){var e,a,n,r,s,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"fetch";return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e="",l=l.toUpperCase(),o=e+o,"GET"===l&&(a="",C()(i).forEach(function(t){a+=t+"="+i[t]+"&"}),""!==a&&(a=a.substr(0,a.lastIndexOf("&")),o=o+"?"+a)),!window.fetch||"fetch"!==c){t.next=26;break}return n={credentials:"include",method:l,headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":_.a.get("csrftoken"),"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"*"},mode:"cors",cache:"default"},"POST"!==l&&"PUT"!==l||Object.defineProperty(n,"body",{value:p()(i.data)}),t.prev=7,t.next=10,fetch(o,n);case 10:if(200!==(r=t.sent).status){t.next=18;break}return t.next=14,r.json();case 14:return s=t.sent,t.abrupt("return",s);case 18:return t.abrupt("return",!1);case 19:t.next=24;break;case 21:throw t.prev=21,t.t0=t.catch(7),new Error(t.t0);case 24:t.next=27;break;case 26:return t.abrupt("return",new k.a(function(t,e){var a=void 0;window.XMLHttpRequest&&(a=new XMLHttpRequest);var n="";"POST"===l&&(n=p()(i)),a.open(l,o,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.send(n),a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status){var n=a.response;"object"!==(void 0===n?"undefined":b()(n))&&(n=JSON.parse(n)),t(n)}else e(a)}}));case 27:case"end":return t.stop()}},t,S,[[7,21]])})),function(){return c.apply(this,arguments)}),$={data:function(){return{showList:!1,loginMessage:"",useList:"",loginData:{acct:"",pass:""},ruleValidate:{acct:[{required:!0,message:"账号不能为空",trigger:"blur"},{min:3,max:16,message:"账号长度3-16个字符",trigger:"blur"}],pass:[{required:!0,message:"密码不能为空",trigger:"blur"},{type:"string",min:6,max:16,message:"密码长度6-16个字符",trigger:"blur"}]}}},mounted:function(){_.a.get("isLogin")&&this.globalMethod.reWriteUrl(this.$router)},methods:{handleSubmit:function(){var t=this;return g()(m.a.mark(function e(){var a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.globalMethod.showLoading("登录中"),a={account:t.loginData.acct,password:t.loginData.pass},e.next=4,L("/staff/admin/login/",{data:a},"POST");case 4:n=e.sent,t.globalMethod.destroyShow(),n?(t.$router.push("manage"),t.globalMethod.showSuccess("登录成功")):t.globalMethod.showError("登录失败");case 7:case"end":return e.stop()}},e,t)}))()},registAcount:function(){this.$router.push("register")},handleReset:function(t){this.$refs[t].resetFields()},getTenantMessage:function(){var t=this;this.axios({method:"GET",url:"/api/user/getUserInfo",headers:{token:_.a.get("token")}}).then(function(e){t.globalMethod.dealResponse(e,function(a){t.useList=e.data.entity,t.globalMethod.setUserInfo(p()(t.useList)),t.globalMethod.reWriteUrl(t.$router)})})}}},P={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[t._m(0),t._v(" "),a("div",{staticClass:"from-wrap"},[a("h2",[t._v("登录")]),t._v(" "),t.showList?a("Alert",{staticStyle:{width:"90%","margin-left":"10%"},attrs:{type:"error"}},[t._v(t._s(t.loginMessage))]):t._e(),t._v(" "),a("Form",{ref:"loginData",attrs:{model:t.loginData,rules:t.ruleValidate,"label-width":80},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSubmit("loginData")}}},[a("FormItem",{attrs:{label:"账号",prop:"acct"}},[a("Input",{attrs:{type:"text",placeholder:"请输入账号"},model:{value:t.loginData.acct,callback:function(e){t.$set(t.loginData,"acct",e)},expression:"loginData.acct"}})],1),t._v(" "),a("FormItem",{attrs:{label:"密码",prop:"pass"}},[a("Input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.loginData.pass,callback:function(e){t.$set(t.loginData,"pass",e)},expression:"loginData.pass"}})],1),t._v(" "),a("FormItem",{staticClass:"form-footer"},[a("Button",{attrs:{type:"primary",long:""},on:{click:function(e){return t.handleSubmit()}}},[t._v("登录")])],1)],1)],1),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("h1",[this._v("莲花商场后台管理")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bottom"},[e("p",[this._v("归属：莲花之家")])])}]};var T={path:"/",name:"login",component:a("VU/8")($,P,!1,function(t){a("b5dH")},null,null).exports,meta:{title:"登录"}},z={data:function(){return{showUserInfo:!1,tenantList:JSON.parse(localStorage.getItem("user_info")),showMessage:!1,showLogout:!1,showPasswordChange:!1,passwordChange:{oldPassword:"",newPassword:"",newPasswordCheck:""},rulePasswordChange:{oldPassword:[{required:!0,message:"请填写原密码",trigger:"blur"}],newPassword:[{required:!0,message:"请填写新密码",trigger:"blur"},{type:"string",min:6,max:16,message:"密码长度6-16个字符",trigger:"blur"}],newPasswordCheck:[{required:!0,message:"请填写确认密码",trigger:"blur"},{type:"string",min:6,max:16,message:"密码长度6-16个字符",trigger:"blur"}]}}},created:function(){},methods:{showMessageFun:function(){this.showMessage=!this.showMessage},logout:function(){var t=this;return g()(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("/staff/admin/logout/",{},"GET");case 2:e.sent&&t.$router.push("/");case 4:case"end":return e.stop()}},e,t)}))()},changePassword:function(t){var e=this;this.$refs[t].validate(function(t){if(t)if(e.passwordChange.newPassword===e.passwordChange.newPasswordCheck){var a=e,n=a.passwordChange;a.globalMethod.showLoading("正在修改"),a.axios.post("/api/user/updatePassword",n).then(function(t){a.globalMethod.dealResponse(t,function(){a.globalMethod.showSuccess("修改成功!"),a.showPasswordChange=!1,a.logout()})})}else e.$Message.error("确认密码填写错误");else e.$Message.error("请填写完整表单")})}}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Header",[a("Menu",{attrs:{mode:"horizontal",theme:"dark","active-name":"1"}},[a("div",{staticClass:"layout-nav",style:{float:"right"}},[a("MenuItem",{attrs:{name:"5"}},[a("div",{on:{click:function(e){t.showPasswordChange=!0}}},[a("Icon",{style:{marginRight:"6px"},attrs:{type:"ios-key",title:"密码修改"}}),t._v(" "),a("span",[t._v("密码修改")])],1)]),t._v(" "),a("MenuItem",{attrs:{name:"6"}},[a("div",{on:{click:function(e){t.showLogout=!0}}},[a("Icon",{style:{marginRight:"6px"},attrs:{type:"ios-log-out",title:"注销"}}),t._v(" "),a("span",[t._v("\n            注销")])],1)])],1)])],1),t._v(" "),a("Modal",{attrs:{title:"注销",width:"20%"},model:{value:t.showLogout,callback:function(e){t.showLogout=e},expression:"showLogout"}},[t._v("\n    是否注销当前用户?\n    "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"default"},on:{click:function(e){t.showLogout=!1}}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"info"},on:{click:function(e){t.showLogout=!1,t.logout()}}},[t._v("确定")])],1)]),t._v(" "),a("Modal",{attrs:{title:"密码修改",width:"40%"},model:{value:t.showPasswordChange,callback:function(e){t.showPasswordChange=e},expression:"showPasswordChange"}},[a("Row",[a("Form",{ref:"passwordChange",attrs:{"label-position":"right","label-width":100,model:t.passwordChange,rules:t.rulePasswordChange}},[a("Row",[a("Col",{attrs:{span:"16"}},[a("FormItem",{attrs:{label:"原密码",prop:"oldPassword"}},[a("Input",{attrs:{type:"password",placeholder:"原密码"},model:{value:t.passwordChange.oldPassword,callback:function(e){t.$set(t.passwordChange,"oldPassword",e)},expression:"passwordChange.oldPassword"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"16"}},[a("FormItem",{attrs:{label:"新密码",prop:"newPassword"}},[a("Input",{attrs:{type:"password",placeholder:"新密码"},model:{value:t.passwordChange.newPassword,callback:function(e){t.$set(t.passwordChange,"newPassword",e)},expression:"passwordChange.newPassword"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"16"}},[a("FormItem",{attrs:{label:"确认密码",prop:"newPassword"}},[a("Input",{attrs:{type:"password",placeholder:"确认密码"},model:{value:t.passwordChange.newPasswordCheck,callback:function(e){t.$set(t.passwordChange,"newPasswordCheck",e)},expression:"passwordChange.newPasswordCheck"}})],1)],1)],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"default"},on:{click:function(e){t.showPasswordChange=!1}}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"info"},on:{click:function(e){return t.changePassword("passwordChange")}}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[]};var M={components:{tenantHeader:a("VU/8")(z,E,!1,function(t){a("fUwT")},null,null).exports,siderBar:o},mounted:function(){this.$router.push("/manage/goods")}},F={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("tenant-header"),this._v(" "),e("div",{staticStyle:{display:"flex"}},[e("sider-bar"),this._v(" "),e("keep-alive",[e("router-view")],1)],1)],1)},staticRenderFns:[]};var R=a("VU/8")(M,F,!1,function(t){a("rZLD")},"data-v-72c99a9a",null).exports,U=function(t,e){return L("/staff/store/?page="+t+"&page_size="+e,{},"GET")},A=function(t){return L("/staff/store/"+t,{},"DELETE")},D=function(t,e){return L("/staff/store/"+t+"/",{data:e},"PUT")},O=a("BO1k"),q=a.n(O),I=a("yPE/"),V={data:function(){return{form:{name:"",logo:"",address_info:"",tel:"",wechat:"",desc:"",images:""},QiniuData:{key:"",token:""},editorOption:{},dialogVisible:!1,dialogImageUrl:[],fileList:[]}},mounted:function(){if(this.params.name){this.form=this.params;var t=this.params.images;if(t.length){var e=!0,a=!1,n=void 0;try{for(var r,s=q()(t);!(e=(r=s.next()).done);e=!0){var o=r.value;o&&this.fileList.push({url:o})}}catch(t){a=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(a)throw n}}}}this.getToken(),this.$refs.myQuillEditor.quill.getModule("toolbar").addHandler("image",this.imgHandler)},methods:{onSubmit:function(){var t=this;return g()(m.a.mark(function e(){var a,n,r,s,o,i,l;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t.form.images=[],a=!0,n=!1,r=void 0,e.prev=4,s=q()(t.fileList);!(a=(o=s.next()).done);a=!0)i=o.value,t.form.images.push(i.url);e.next=12;break;case 8:e.prev=8,e.t0=e.catch(4),n=!0,r=e.t0;case 12:e.prev=12,e.prev=13,!a&&s.return&&s.return();case 15:if(e.prev=15,!n){e.next=18;break}throw r;case 18:return e.finish(15);case 19:return e.finish(12);case 20:if(l=void 0,t.params.name){e.next=27;break}return e.next=24,c=t.form,L("/staff/store/",{data:c},"POST");case 24:l=e.sent,e.next=30;break;case 27:return e.next=29,D(t.params.id,t.form);case 29:l=e.sent;case 30:l?(t.$message.success("操作成功!"),t.$emit("show",!1)):t.$message.error("操作失败!");case 31:case"end":return e.stop()}var c},e,t,[[4,8,12,20],[13,,15,19]])}))()},handleAvatarSuccess:function(t,e){this.$set(this.form,"logo","http://lhxq.top/"+t.key)},beforeAvatarUpload:function(t){var e=t.size/1024/1024<2;return e||this.$message.error("上传头像图片大小不能超过 2MB!"),this.QiniuData.key=""+t.name,e},back:function(){this.$emit("show",!1)},getToken:function(){var t=this;return g()(m.a.mark(function e(){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("/qiniutoken/",{},"GET");case 2:a=e.sent,t.QiniuData.token=a.data.token;case 4:case"end":return e.stop()}},e,t)}))()},imgHandler:function(t){(this.addRange=this.$refs.myQuillEditor.quill.getSelection(),t)&&document.getElementById("imgInput").click()},handleRemove:function(t,e){this.fileList=e},upScuccess:function(t,e,a){var n=this,r="http://lhxq.top/"+t.key;if(null!=r&&r.length>0){var s=r;n.addRange=n.$refs.myQuillEditor.quill.getSelection(),s=-1!==s.indexOf("http")?s:"http:"+s,n.$refs.myQuillEditor.quill.insertEmbed(null!==n.addRange?n.addRange.index:0,"image",s,I.sources.USER)}else this.$message.error("插入失败");this.$refs.upload.clearFiles()},handlePictureCardPreview:function(t){this.dialogVisible=!0},handleAvatarSuccess2:function(t,e){var a="http://lhxq.top/"+t.key;this.fileList.push({url:a})}},props:["params"]},H={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper-view"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:""}}},[a("span",{on:{click:t.back}},[t._v("店铺列表")])]),t._v(" "),a("el-breadcrumb-item",[t._v("创建店铺")])],1),t._v(" "),a("el-form",{ref:"form",staticClass:"el-form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"店铺名称"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"上传图片"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://upload-z2.qiniup.com","show-file-list":!1,"list-type":"picture",data:t.QiniuData,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.logo?a("img",{staticClass:"avatar",attrs:{src:t.form.logo}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"店铺地址"}},[a("el-input",{model:{value:t.form.address_info,callback:function(e){t.$set(t.form,"address_info",e)},expression:"form.address_info"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系方式"}},[a("el-input",{model:{value:t.form.tel,callback:function(e){t.$set(t.form,"tel",e)},expression:"form.tel"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商家微信"}},[a("el-input",{model:{value:t.form.wechat,callback:function(e){t.$set(t.form,"wechat",e)},expression:"form.wechat"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商家图片"}},[a("el-upload",{attrs:{action:"https://upload-z2.qiniup.com","list-type":"picture-card","on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"on-success":t.handleAvatarSuccess2,"before-upload":t.beforeAvatarUpload,data:t.QiniuData,"file-list":t.fileList}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}})],1),t._v(" "),a("el-form-item",{attrs:{label:"详情"}},[a("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOption},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}}),t._v(" "),a("el-upload",{ref:"upload",staticClass:"upload-demo",staticStyle:{display:"none"},attrs:{action:"https://upload-z2.qiniup.com",data:t.QiniuData,"on-success":t.upScuccess,"before-upload":t.beforeAvatarUpload}},[a("el-button",{attrs:{size:"small",type:"primary",id:"imgInput","element-loading-text":"插入中,请稍候"}},[t._v("点击上传\n        ")])],1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确定")]),t._v(" "),a("el-button",{on:{click:t.back}},[t._v("返回")])],1)],1)],1)},staticRenderFns:[]};var Q={data:function(){return{form:{},is_show:!0,List:[]}},mounted:function(){this.getTagsList_(),this.params.name&&(this.form=this.params)},methods:{cancel:function(){this.$emit("show",!1)},getTagsList_:function(){var t=this;return g()(m.a.mark(function e(){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("/staff/tag/?page="+1+"&pageSize="+10,{},"GET");case 2:a=e.sent,t.List=a.data.results;case 4:case"end":return e.stop()}},e,t)}))()},submit:function(){this.$emit("show",!1)},add:function(){var t=this,e={tag_id:this.form.tag_id};(function(t,e){return L("/staff/store/"+t+"/add_tag/",{data:e},"POST")})(this.form.id,e).then(function(e){e?t.$message.success("新增标签成功"):t.$message.error("新增标签失败")})},deletetag:function(){var t=this,e={tag_id:this.form.tag_id_delete};(function(t,e){return L("/staff/store/"+t+"/delete_tag/",{data:e},"POST")})(this.form.id,e).then(function(e){e?t.$message.success("删除标签成功"):t.$message.error("删除标签失败")})}},props:["params"]},G={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.is_show,title:"创建标签",width:"50%",top:"25vh",center:""}},[a("el-form",{ref:"form",staticClass:"el-form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"新增标签"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.tag_id,callback:function(e){t.$set(t.form,"tag_id",e)},expression:"form.tag_id"}},t._l(t.List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.add()}}},[t._v("新增标签")])],1),t._v(" "),a("el-form-item",{attrs:{label:"删除标签"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.tag_id_delete,callback:function(e){t.$set(t.form,"tag_id_delete",e)},expression:"form.tag_id_delete"}},t._l(t.List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.deletetag()}}},[t._v("删除标签")])],1),t._v(" "),a("el-form-item",{attrs:{label:"已有标签"}},t._l(t.form.tags,function(e){return a("span",{staticClass:"good-img"},[t._v(t._s(e.name)+"、")])}),0)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.cancel()}}},[t._v("关闭")])],1)],1)},staticRenderFns:[]},B={data:function(){return{List:[],pagination:{currentPage:1,total:0,pageSize:5},showCreate:!1,showTag:!1,params:{}}},created:function(){},mounted:function(){this.getList(this.pagination.currentPage,this.pagination.pageSize)},activated:function(){this.getList(this.pagination.currentPage,this.pagination.pageSize)},methods:{getList:function(t,e){var a=this;return g()(m.a.mark(function n(){var r;return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,U(t,e);case 2:r=n.sent,a.pagination.total=r.data.count,a.List=r.data.results;case 5:case"end":return n.stop()}},n,a)}))()},deleteStore_:function(t){var e=this;return g()(m.a.mark(function a(){return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,A(t);case 2:a.sent&&e.getList(e.pagination.currentPage,e.pagination.pageSize);case 4:case"end":return a.stop()}},a,e)}))()},createStore:function(){this.$router.push("/manage/stores/create")},handleSizeChange:function(t){this.getList(this.pagination.currentPage,t)},handleCurrentChange:function(t){this.getList(t,this.pagination.pageSize)},deleteEntity:function(t){var e=this;this.$confirm("确认删除？").then(function(a){e.deleteStore_(t)}).catch(function(t){})},showFunc:function(){this.getList(this.pagination.currentPage,this.pagination.pageSize),this.showCreate=!1,this.params={}},showFuncTag:function(){this.getList(this.pagination.currentPage,this.pagination.pageSize),this.showTag=!1,this.params={}},addTagFun:function(t){this.showTag=!0,this.params=t},edit:function(t){this.showCreate=!0,this.params=t}},components:{createStore:a("VU/8")(V,H,!1,function(t){a("pR9r")},"data-v-800f3da2",null).exports,addTag:a("VU/8")(Q,G,!1,null,null,null).exports}},j={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper-view"},[t.showCreate?t._e():a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showCreate=!0}}},[t._v("创建店铺\n    ")]),t._v(" "),a("div",{staticStyle:{"min-height":"75vh"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.List}},[a("el-table-column",{attrs:{prop:"name",label:"店铺名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"logo",label:"店铺logo"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.logo,"min-width":"70",height:"70"}})]}}],null,!1,4045306653)}),t._v(" "),a("el-table-column",{attrs:{prop:"address_info",label:"店铺地址"}}),t._v(" "),a("el-table-column",{attrs:{prop:"tel",label:"联系方式"}}),t._v(" "),a("el-table-column",{attrs:{prop:"wechat",label:"商家微信"}}),t._v(" "),a("el-table-column",{attrs:{prop:"wechat",label:"标签"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.tags,function(e){return a("span",{staticClass:"good-img"},[t._v(t._s(e.name)+"、")])})}}],null,!1,506789209)}),t._v(" "),a("el-table-column",{attrs:{prop:"create_at",label:"创建时间",formatter:this.globalMethod.dateFormat}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.edit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{staticStyle:{margin:"5px 0 0 0"},attrs:{type:"danger",size:"small"},on:{click:function(a){return t.deleteEntity(e.row.id)}}},[t._v("删除")]),t._v(" "),a("el-button",{staticStyle:{margin:"5px 0 0 0"},attrs:{type:"primary",size:"small"},on:{click:function(a){return t.addTagFun(e.row)}}},[t._v("标签管理")])]}}],null,!1,3328209109)})],1)],1),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize,layout:"total, prev, pager, next, jumper",total:t.pagination.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),t.showCreate?a("create-store",{attrs:{params:t.params},on:{show:t.showFunc}}):t._e(),t._v(" "),t.showTag?a("add-tag",{attrs:{params:t.params},on:{show:t.showFuncTag}}):t._e()],1)},staticRenderFns:[]},N={path:"stores",component:a("VU/8")(B,j,!1,null,null,null).exports,meta:{title:"店铺列表",keepAlive:!1},children:[]},W=function(t,e){return L("/staff/product/?page="+t+"&pageSize="+e,{},"GET")},J=function(t){return L("/staff/product/"+t,{},"DELETE")},X=function(t,e){return L("/staff/product/"+t+"/",{data:e},"PUT")},Y=function(t){return L("/staff/product/"+t+"/set_on_shelf/",{},"POST")},Z=function(t){return L("/staff/product/"+t+"/set_off_shelf/",{},"POST")},K={data:function(){return{form:{store:"",name:"",price:"",unit:"",detail:"",images:[]},List:[],QiniuData:{key:"",token:""},editorOption:{},dialogVisible:!1,dialogImageUrl:[],fileList:[]}},mounted:function(){if(this.getList(),this.getToken(),this.params.name){this.form=this.params;var t=this.params.images;if(t.length){var e=!0,a=!1,n=void 0;try{for(var r,s=q()(t);!(e=(r=s.next()).done);e=!0){var o=r.value;o&&this.fileList.push({url:o})}}catch(t){a=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(a)throw n}}}}this.$refs.myQuillEditor.quill.getModule("toolbar").addHandler("image",this.imgHandler)},methods:{onSubmit:function(){var t=this;return g()(m.a.mark(function e(){var a,n,r,s,o,i,l;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t.form.images=[],a=!0,n=!1,r=void 0,e.prev=4,s=q()(t.fileList);!(a=(o=s.next()).done);a=!0)i=o.value,t.form.images.push(i.url);e.next=12;break;case 8:e.prev=8,e.t0=e.catch(4),n=!0,r=e.t0;case 12:e.prev=12,e.prev=13,!a&&s.return&&s.return();case 15:if(e.prev=15,!n){e.next=18;break}throw r;case 18:return e.finish(15);case 19:return e.finish(12);case 20:if(l=void 0,t.params.name){e.next=27;break}return e.next=24,c=t.form,L("/staff/product/",{data:c},"POST");case 24:l=e.sent,e.next=30;break;case 27:return e.next=29,X(t.params.id,t.form);case 29:l=e.sent;case 30:l?(t.$message.success("操作成功!"),t.$emit("show",!1)):t.$message.error("操作失败!");case 31:case"end":return e.stop()}var c},e,t,[[4,8,12,20],[13,,15,19]])}))()},getList:function(){var t=this;return g()(m.a.mark(function e(){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("/staff/store/",{},"GET");case 2:a=e.sent,t.List=a.data.results;case 4:case"end":return e.stop()}},e,t)}))()},beforeAvatarUpload:function(t){var e=t.size/1024/1024<2;return e||this.$message.error("上传头像图片大小不能超过 2MB!"),this.QiniuData.key=""+t.name,e},handlePictureCardPreview:function(t){this.dialogVisible=!0},handleAvatarSuccess:function(t,e){var a="http://lhxq.top/"+t.key;this.fileList.push({url:a})},back:function(){this.$emit("show",!1)},getToken:function(){var t=this;return g()(m.a.mark(function e(){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("/qiniutoken/",{},"GET");case 2:a=e.sent,t.QiniuData.token=a.data.token;case 4:case"end":return e.stop()}},e,t)}))()},upScuccess:function(t,e,a){var n=this,r="http://lhxq.top/"+t.key;if(null!=r&&r.length>0){var s=r;n.addRange=n.$refs.myQuillEditor.quill.getSelection(),s=-1!==s.indexOf("http")?s:"http:"+s,n.$refs.myQuillEditor.quill.insertEmbed(null!==n.addRange?n.addRange.index:0,"image",s,I.sources.USER)}else this.$message.error("插入失败");this.$refs.upload.clearFiles()},handleRemove:function(t,e){this.fileList=e},imgHandler:function(t){(this.addRange=this.$refs.myQuillEditor.quill.getSelection(),t)&&document.getElementById("imgInput").click()}},props:["params"]},tt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper-view"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:""}}},[a("span",{on:{click:t.back}},[t._v("商品列表")])]),t._v(" "),a("el-breadcrumb-item",[t._v("创建商品")])],1),t._v(" "),a("el-form",{ref:"form",staticClass:"el-form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"商品名称"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品名称"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.store,callback:function(e){t.$set(t.form,"store",e)},expression:"form.store"}},t._l(t.List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"产品价格"}},[a("el-input",{attrs:{type:"number"},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"规格"}},[a("el-input",{model:{value:t.form.unit,callback:function(e){t.$set(t.form,"unit",e)},expression:"form.unit"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"上传图片"}},[a("el-upload",{attrs:{action:"https://upload-z2.qiniup.com","list-type":"picture-card","on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload,data:t.QiniuData,"file-list":t.fileList}},[a("i",{staticClass:"el-icon-plus"})]),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}})],1),t._v(" "),a("el-form-item",{attrs:{label:"详情"}},[a("quill-editor",{ref:"myQuillEditor",attrs:{options:t.editorOption},model:{value:t.form.detail,callback:function(e){t.$set(t.form,"detail",e)},expression:"form.detail"}}),t._v(" "),a("el-upload",{ref:"upload",staticClass:"upload-demo",staticStyle:{display:"none"},attrs:{action:"https://upload-z2.qiniup.com",data:t.QiniuData,"on-success":t.upScuccess,"before-upload":t.beforeAvatarUpload}},[a("el-button",{attrs:{size:"small",type:"primary",id:"imgInput","element-loading-text":"插入中,请稍候"}},[t._v("点击上传\n        ")])],1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确定")]),t._v(" "),a("el-button",{on:{click:t.back}},[t._v("返回")])],1)],1)],1)},staticRenderFns:[]};var et={data:function(){return{form:{},is_show:!0,List:[]}},mounted:function(){this.getTagsList_(),this.params.name&&(this.form=this.params)},methods:{cancel:function(){this.$emit("show",!1)},getTagsList_:function(){var t=this;return g()(m.a.mark(function e(){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("/staff/producttype/?page="+1+"&pageSize="+10,{},"GET");case 2:a=e.sent,t.List=a.data.results;case 4:case"end":return e.stop()}},e,t)}))()},submit:function(){this.$emit("show",!1)},add:function(){var t=this,e={producttype_id:this.form.tag_id};(function(t,e){return L("/staff/product/"+t+"/add_producttype/",{data:e},"POST")})(this.form.id,e).then(function(e){e?t.$message.success("新增标签成功"):t.$message.error("新增标签失败")})},deletetag:function(){var t=this,e={producttype_id:this.form.tag_id_delete};(function(t,e){return L("/staff/product/"+t+"/delete_producttype/",{data:e},"POST")})(this.form.id,e).then(function(e){e?t.$message.success("删除标签成功"):t.$message.error("删除标签失败")})}},props:["params"]},at={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.is_show,title:"创建标签",width:"50%",top:"25vh",center:""}},[a("el-form",{ref:"form",staticClass:"el-form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"新增标签"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.tag_id,callback:function(e){t.$set(t.form,"tag_id",e)},expression:"form.tag_id"}},t._l(t.List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.add()}}},[t._v("新增标签")])],1),t._v(" "),a("el-form-item",{attrs:{label:"删除标签"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.tag_id_delete,callback:function(e){t.$set(t.form,"tag_id_delete",e)},expression:"form.tag_id_delete"}},t._l(t.List,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.deletetag()}}},[t._v("删除标签")])],1),t._v(" "),a("el-form-item",{attrs:{label:"已有标签"}},t._l(t.form.types,function(e){return a("span",{staticClass:"good-img"},[t._v(t._s(e.name)+"、")])}),0)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.cancel()}}},[t._v("关闭")])],1)],1)},staticRenderFns:[]},nt={data:function(){return{List:[],pagination:{currentPage:1,total:0,pageSize:5},showCreate:!1,showTag:!1,params:{}}},created:function(){},mounted:function(){this.getList(this.pagination.currentPage,this.pagination.pageSize)},activated:function(){this.getList(this.pagination.currentPage,this.pagination.pageSize)},methods:{getList:function(t,e){var a=this;return g()(m.a.mark(function n(){var r;return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,W(t,e);case 2:r=n.sent,a.List=r.data.results,a.pagination.total=r.data.count;case 5:case"end":return n.stop()}},n,a)}))()},deleteGood_:function(t){var e=this;return g()(m.a.mark(function a(){return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,J(t);case 2:a.sent&&e.getList(e.pagination.currentPage,e.pagination.pageSize);case 4:case"end":return a.stop()}},a,e)}))()},handleSizeChange:function(t){this.getList(this.pagination.currentPage,t)},handleCurrentChange:function(t){this.getList(t,this.pagination.pageSize)},deleteEntity:function(t){var e=this;this.$confirm("确认删除？").then(function(a){e.deleteGood_(t)}).catch(function(t){})},showFunc:function(){this.getList(this.pagination.currentPage,this.pagination.pageSize),this.showCreate=!1,this.params={}},edit:function(t){this.showCreate=!0,this.params=t},goodUp:function(t){var e=this;return g()(m.a.mark(function a(){return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Y(t);case 2:a.sent?e.globalMethod.showSuccess("上架成功"):e.globalMethod.showError("上架失败"),e.getList(e.pagination.currentPage,e.pagination.pageSize);case 5:case"end":return a.stop()}},a,e)}))()},goodDown:function(t){var e=this;return g()(m.a.mark(function a(){return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Z(t);case 2:a.sent?e.globalMethod.showSuccess("下架成功"):e.globalMethod.showError("下架失败"),e.getList(e.pagination.currentPage,e.pagination.pageSize);case 5:case"end":return a.stop()}},a,e)}))()},showFuncTag:function(){this.getList(this.pagination.currentPage,this.pagination.pageSize),this.showTag=!1,this.params={}},addTagFun:function(t){this.showTag=!0,this.params=t}},components:{createGood:a("VU/8")(K,tt,!1,function(t){a("q0SG")},"data-v-002a6e76",null).exports,addTag:a("VU/8")(et,at,!1,null,null,null).exports}},rt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper-view"},[t.showCreate?t._e():a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showCreate=!0}}},[t._v("创建商品\n    ")]),t._v(" "),a("div",{staticStyle:{"min-height":"75vh"}},[a("el-table",{attrs:{data:t.List}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"商品图片"}},t._l(e.row.images,function(t){return a("img",{staticClass:"good-img",attrs:{src:t,width:"70"}})}),0)],1),t._v(" "),a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"商品标签"}},t._l(e.row.types,function(e){return a("span",[t._v(t._s(e.name)+"、")])}),0)],1)]}}],null,!1,4249891992)}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"商品名称",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"create_at",label:"创建时间",formatter:this.globalMethod.dateFormat}}),t._v(" "),a("el-table-column",{attrs:{prop:"view_total",label:"商品个数"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.edit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button-group",[0===e.row.status?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.goodUp(e.row.id)}}},[t._v("上架\n              ")]):t._e(),t._v(" "),1===e.row.status?a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){return t.goodDown(e.row.id)}}},[t._v("\n                下架\n              ")]):t._e()],1),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.deleteEntity(e.row.id)}}},[t._v("删除")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.addTagFun(e.row)}}},[t._v("标签管理")])]}}],null,!1,4151427996)})],1)],1),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize,layout:"total, prev, pager, next, jumper",total:t.pagination.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),t.showCreate?a("create-good",{attrs:{params:t.params},on:{show:t.showFunc}}):t._e(),t._v(" "),t.showTag?a("add-tag",{attrs:{params:t.params},on:{show:t.showFuncTag}}):t._e()],1)},staticRenderFns:[]};var st={path:"goods",component:a("VU/8")(nt,rt,!1,function(t){a("x9qr")},"data-v-4d8b6362",null).exports,meta:{title:"商品列表"},children:[]},ot=function(t,e){return L("/staff/ad/?page="+t+"&page_size="+e,{},"GET")},it=function(t){return L("/staff/ad/"+t,{},"DELETE")},lt=function(t,e){return L("/staff/ad/"+t+"/",{data:e},"PUT")},ct={data:function(){return{form:{name:"",image:"",resource_str:"",ad_type:"",begin_at:"",end_at:"",status:1},QiniuData:{key:"",token:""}}},mounted:function(){this.params.name&&(this.form=this.params,this.form.ad_type=this.form.ad_type+""),this.getToken()},methods:{onSubmit:function(){var t=this;return g()(m.a.mark(function e(){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=void 0,t.params.name){e.next=7;break}return e.next=4,n=t.form,L("/staff/ad/",{data:n},"POST");case 4:a=e.sent,e.next=10;break;case 7:return e.next=9,lt(t.params.id,t.form);case 9:a=e.sent;case 10:a?(t.$message.success("操作成功!"),t.$emit("show",!1)):t.$message.error("操作失败!");case 11:case"end":return e.stop()}var n},e,t)}))()},handleAvatarSuccess:function(t,e){this.$set(this.form,"image","http://lhxq.top/"+t.key)},beforeAvatarUpload:function(t){var e=t.size/1024/1024<2;return e||this.$message.error("上传头像图片大小不能超过 2MB!"),this.QiniuData.key=""+t.name,e},back:function(){this.$emit("show",!1)},getToken:function(){var t=this;return g()(m.a.mark(function e(){var a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("/qiniutoken/",{},"GET");case 2:a=e.sent,t.QiniuData.token=a.data.token;case 4:case"end":return e.stop()}},e,t)}))()}},props:["params"]},ut={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper-view"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:""}}},[a("span",{on:{click:t.back}},[t._v("广告列表")])]),t._v(" "),a("el-breadcrumb-item",[t._v("创建广告")])],1),t._v(" "),a("el-form",{ref:"form",staticClass:"el-form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"广告名称"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"上传图片"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://upload-z2.qiniup.com","show-file-list":!1,"list-type":"picture",data:t.QiniuData,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.form.image?a("img",{staticClass:"avatar",attrs:{src:t.form.image}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"广告类型"}},[a("el-radio",{attrs:{label:"0"},model:{value:t.form.ad_type,callback:function(e){t.$set(t.form,"ad_type",e)},expression:"form.ad_type"}},[t._v("网页")]),t._v(" "),a("el-radio",{attrs:{label:"1"},model:{value:t.form.ad_type,callback:function(e){t.$set(t.form,"ad_type",e)},expression:"form.ad_type"}},[t._v("店铺")]),t._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:t.form.ad_type,callback:function(e){t.$set(t.form,"ad_type",e)},expression:"form.ad_type"}},[t._v("产品详情")]),t._v(" "),a("el-radio",{attrs:{label:"4"},model:{value:t.form.ad_type,callback:function(e){t.$set(t.form,"ad_type",e)},expression:"form.ad_type"}},[t._v("拼车详情")])],1),t._v(" "),a("el-form-item",{attrs:{label:"上下架"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"下架日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.form.end_at,callback:function(e){t.$set(t.form,"end_at",e)},expression:"form.end_at"}}),t._v(" "),a("el-date-picker",{staticStyle:{display:"inline-block"},attrs:{type:"datetime",placeholder:"上架日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.form.begin_at,callback:function(e){t.$set(t.form,"begin_at",e)},expression:"form.begin_at"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"广告地址"}},[a("el-input",{model:{value:t.form.resource_str,callback:function(e){t.$set(t.form,"resource_str",e)},expression:"form.resource_str"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确定")]),t._v(" "),a("el-button",{on:{click:t.back}},[t._v("返回")])],1)],1)],1)},staticRenderFns:[]};var dt={data:function(){return{List:[],pagination:{currentPage:1,total:0,pageSize:5},showCreate:!1,params:{}}},created:function(){},mounted:function(){this.getList(this.pagination.currentPage,this.pagination.pageSize)},activated:function(){this.getList(this.pagination.currentPage,this.pagination.pageSize)},methods:{getList:function(t,e){var a=this;return g()(m.a.mark(function n(){var r;return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ot(t,e);case 2:r=n.sent,a.pagination.total=r.data.count,a.List=r.data.results;case 5:case"end":return n.stop()}},n,a)}))()},deleteAdvert_:function(t){var e=this;return g()(m.a.mark(function a(){return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,it(t);case 2:a.sent&&e.getList(e.pagination.currentPage,e.pagination.pageSize);case 4:case"end":return a.stop()}},a,e)}))()},handleSizeChange:function(t){this.getList(this.pagination.currentPage,t)},handleCurrentChange:function(t){this.getList(t,this.pagination.pageSize)},deleteEntity:function(t){var e=this;this.$confirm("确认删除？").then(function(a){e.deleteAdvert_(t)}).catch(function(t){})},showFunc:function(){this.getList(this.pagination.currentPage,this.pagination.pageSize),this.showCreate=!1,this.params={}},edit:function(t){this.showCreate=!0,this.params=t}},components:{createAdvert:a("VU/8")(ct,ut,!1,function(t){a("MyGt")},"data-v-608a074f",null).exports}},pt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper-view"},[t.showCreate?t._e():a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showCreate=!0}}},[t._v("创建广告\n    ")]),t._v(" "),a("div",{staticStyle:{"min-height":"75vh"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.List}},[a("el-table-column",{attrs:{prop:"name",label:"广告名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"image",label:"图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.image,"min-width":"70",height:"70"}})]}}],null,!1,1228669137)}),t._v(" "),a("el-table-column",{attrs:{prop:"ad_type",label:"广告类型",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.ad_type?a("span",[t._v("网页")]):t._e(),t._v(" "),1==e.row.ad_type?a("span",[t._v("店铺")]):t._e(),t._v(" "),2==e.row.ad_type?a("span",[t._v("产品详情")]):t._e(),t._v(" "),4==e.row.ad_type?a("span",[t._v("拼车详情")]):t._e()]}}],null,!1,1632571202)}),t._v(" "),a("el-table-column",{attrs:{prop:"create_at",label:"创建时间",formatter:this.globalMethod.dateFormat}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.edit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.deleteEntity(e.row.id)}}},[t._v("删除")])]}}],null,!1,1211275641)})],1)],1),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize,layout:"total, prev, pager, next, jumper",total:t.pagination.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),t.showCreate?a("create-advert",{attrs:{params:t.params},on:{show:t.showFunc}}):t._e()],1)},staticRenderFns:[]},ft={path:"adverts",component:a("VU/8")(dt,pt,!1,null,null,null).exports,meta:{title:"广告列表",keepAlive:!1},children:[]},mt=function(t,e){return L("/staff/tag/?page="+t+"&pageSize="+e,{},"GET")},ht=function(t){return L("/staff/tag/"+t,{},"DELETE")},gt={data:function(){return{form:{},is_show:!0}},mounted:function(){this.params.name&&(this.form=this.params)},methods:{cancel:function(){this.$emit("show",!1)},submit:function(){var t;this.params.name?function(t,e){L("/staff/tag/"+t+"/",{data:e},"PUT")}(this.form.id,this.form):(t=this.form,L("/staff/tag/",{data:t},"POST")),this.$emit("show",!1)}},props:["params"]},vt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.is_show,title:"创建标签",width:"30%",top:"25vh",center:""}},[a("el-form",{ref:"form",staticClass:"el-form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"标签名称"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.cancel()}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submit()}}},[t._v("确 定")])],1)],1)},staticRenderFns:[]},_t={data:function(){return{List:[],pagination:{currentPage:1,total:0,pageSize:5},params:{},showCreate:!1}},created:function(){},mounted:function(){this.getList(this.pagination.currentPage,this.pagination.pageSize)},activated:function(){this.getList(this.pagination.currentPage,this.pagination.pageSize)},methods:{getList:function(t,e){var a=this;return g()(m.a.mark(function n(){var r;return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,mt(t,e);case 2:r=n.sent,a.List=r.data.results,a.pagination.total=r.data.count;case 5:case"end":return n.stop()}},n,a)}))()},deleteTag_:function(t){var e=this;return g()(m.a.mark(function a(){return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ht(t);case 2:a.sent&&e.getList(e.pagination.currentPage,e.pagination.pageSize);case 4:case"end":return a.stop()}},a,e)}))()},handleSizeChange:function(t){this.getList(this.pagination.currentPage,t)},handleCurrentChange:function(t){this.getList(t,this.pagination.pageSize)},showFunc:function(){this.getList(this.pagination.currentPage,this.pagination.pageSize),this.showCreate=!1,this.params={}},deleteEntity:function(t){var e=this;this.$confirm("确认删除？").then(function(a){e.deleteTag_(t)}).catch(function(t){})},edit:function(t){this.showCreate=!0,this.params=t}},components:{createTag:a("VU/8")(gt,vt,!1,null,null,null).exports}},wt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper-view"},[a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showCreate=!0}}},[t._v("创建标签\n    ")]),t._v(" "),a("div",{staticStyle:{"min-height":"75vh"}},[a("el-table",{attrs:{data:t.List}},[a("el-table-column",{attrs:{prop:"name",label:"标签名称",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"create_at",label:"创建时间",formatter:this.globalMethod.dateFormat}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.edit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.deleteEntity(e.row.id)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize,layout:"total, prev, pager, next, jumper",total:t.pagination.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),t.showCreate?a("create-tag",{attrs:{params:t.params},on:{show:t.showFunc}}):t._e()],1)},staticRenderFns:[]};var bt={path:"tags",component:a("VU/8")(_t,wt,!1,function(t){a("pzOL")},"data-v-2b32b950",null).exports,meta:{title:"标签列表"},children:[]},yt=function(t,e){return L("/staff/producttype/?page="+t+"&pageSize="+e,{},"GET")},kt=function(t){return L("/staff/producttype/"+t,{},"DELETE")},xt={data:function(){return{form:{},is_show:!0}},mounted:function(){this.params.name&&(this.form=this.params)},methods:{cancel:function(){this.$emit("show",!1)},submit:function(){var t;this.params.name?function(t,e){L("/staff/producttype/"+t+"/",{data:e},"PUT")}(this.form.id,this.form):(t=this.form,L("/staff/producttype/",{data:t},"POST")),this.$emit("show",!1)}},props:["params"]},Ct={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.is_show,title:"创建标签",width:"30%",top:"25vh",center:""}},[a("el-form",{ref:"form",staticClass:"el-form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"标签名称"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.cancel()}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submit()}}},[t._v("确 定")])],1)],1)},staticRenderFns:[]},St={data:function(){return{List:[],pagination:{currentPage:1,total:0,pageSize:5},params:{},showCreate:!1}},created:function(){},mounted:function(){this.getList(this.pagination.currentPage,this.pagination.pageSize)},activated:function(){this.getList(this.pagination.currentPage,this.pagination.pageSize)},methods:{getList:function(t,e){var a=this;return g()(m.a.mark(function n(){var r;return m.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,yt(t,e);case 2:r=n.sent,a.List=r.data.results,a.pagination.total=r.data.count;case 5:case"end":return n.stop()}},n,a)}))()},deleteTag_:function(t){var e=this;return g()(m.a.mark(function a(){return m.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,kt(t);case 2:a.sent&&e.getList(e.pagination.currentPage,e.pagination.pageSize);case 4:case"end":return a.stop()}},a,e)}))()},handleSizeChange:function(t){this.getList(this.pagination.currentPage,t)},handleCurrentChange:function(t){this.getList(t,this.pagination.pageSize)},showFunc:function(){this.getList(this.pagination.currentPage,this.pagination.pageSize),this.showCreate=!1,this.params={}},deleteEntity:function(t){var e=this;this.$confirm("确认删除？").then(function(a){e.deleteTag_(t)}).catch(function(t){})},edit:function(t){this.showCreate=!0,this.params=t}},components:{createTag:a("VU/8")(xt,Ct,!1,null,null,null).exports}},Lt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper-view"},[a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showCreate=!0}}},[t._v("创建标签\n    ")]),t._v(" "),a("div",{staticStyle:{"min-height":"75vh"}},[a("el-table",{attrs:{data:t.List}},[a("el-table-column",{attrs:{prop:"name",label:"标签名称",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"create_at",label:"创建时间",formatter:this.globalMethod.dateFormat}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.edit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.deleteEntity(e.row.id)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("el-pagination",{attrs:{background:"","current-page":t.pagination.currentPage,"page-size":t.pagination.pageSize,layout:"total, prev, pager, next, jumper",total:t.pagination.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),t.showCreate?a("create-tag",{attrs:{params:t.params},on:{show:t.showFunc}}):t._e()],1)},staticRenderFns:[]};var $t=[];[T,{path:"/manage",component:R,meta:{title:"管理员"},children:[st,N,ft,bt,{path:"goodstags",component:a("VU/8")(St,Lt,!1,function(t){a("r4FR")},"data-v-94bad844",null).exports,meta:{title:"标签列表"},children:[]}]}].forEach(function(t,e){t&&t.path&&$t.push(t)});var Pt=$t,Tt=a("zL8q"),zt=a.n(Tt),Et=(a("+skl"),a("tvR6"),a("BTaQ")),Mt=a.n(Et),Ft=a("mtWM"),Rt=a.n(Ft),Ut=a("Rf8U"),At=a.n(Ut),Dt=a("/ocq"),Ot=a("2cg0"),qt=a.n(Ot),It=new n.default({data:function(){return{chars:["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]}},methods:{initPage:function(t,e){return(e=e||{}).pageSize=t.pageSize,e.pageNum=t.pageNum,e},dealResponse:function(t,e,a){((a=a||{}).destroyMessage||void 0===a.destroyMessage)&&this.destroyShow(),t.data.success?(a.destroySuccessMessage&&this.destroyShow(),(a.showSuccess||a.showAlert)&&this.showSuccess(a.successMessage||t.data.msg||"操作成功"),e&&e(t.data.entity)):(a.destroyFailMessage&&this.destroyShow(),(a.showError||a.showAlert||void 0===a.showError)&&this.showError(a.errorMessage||t.data.msg||"操作失败"),a.failCallback&&a.failCallback(t.data))},showLoading:function(t,e){e=e||{},this.$Message.loading(qt()({content:t||"加载中",duration:0},e))},showError:function(t,e){e=e||{},this.$Message.error(qt()({content:t||"操作失败",duration:1.5},e))},showWarning:function(t,e){e=e||{},this.$Message.warning(qt()({content:t||"操作有误",duration:1.5},e))},showInfo:function(t,e){e=e||{},this.$Message.info(qt()({content:t||"提示",duration:1.5},e))},showSuccess:function(t,e){e=e||{},this.$Message.success(qt()({content:t||"操作成功",duration:1.5},e))},destroyShow:function(){this.$Message.destroy()},deepCopy:function(t){return JSON.parse(p()(t))},keyCopy:function(t,e){if(e=e||{},"object"!==(void 0===t?"undefined":b()(t)))return e;for(var a in t)e[a+""]=t[a+""]},timeFormatFun:function(t,e){var a=new Date(t),n=function(t){return(t<10?"0":"")+t};return e.replace(/yyyy|MM|dd|HH|mm|ss/g,function(t){switch(t){case"yyyy":return n(a.getFullYear());case"MM":return n(a.getMonth()+1);case"mm":return n(a.getMinutes());case"dd":return n(a.getDate());case"HH":return n(a.getHours());case"ss":return n(a.getSeconds())}})},downloadFile:function(t){window.open("/api/attach/download/"+t,"_self")},downloadFileByUrl:function(t){window.open(t,"_self")},uploadFile:function(t,e,a){a=a||"file",e=e||"/api/uploadEnclosure";var n=new FormData;if(t instanceof Array)for(var r in t)n.append(a,t[r]);else n.append(a,t);return this.axios.post(e,n,{headers:{"Content-Type":"multipart/form-data"}})},setUserInfo:function(t){localStorage.clear(),sessionStorage.clear(),localStorage.setItem("user_info",t)},destroyUser:function(t,e){e=e||"router",t=t||this.$router,localStorage.removeItem("user_info"),_.a.remove("userId"),_.a.remove("isLogin"),"router"===e?t.push({path:"/"}):t("/")},reWriteUrl:function(t,e){if(e=e||"router",t=t||this.$router,localStorage.getItem("user_info")){var a=JSON.parse(localStorage.getItem("user_info")).roles[0].roleCode||"";this.globalMethod.destroyShow(),this.globalMap.operationRoleMap.tenant.code.indexOf(a)>-1?"router"===e?t.push("/tenant/systemAssetList"):t("/tenant/systemAssetList"):this.globalMap.operationRoleMap.operation.code.indexOf(a)>-1?"router"===e?t.push("/operation/systemAssetList"):t("/operation/systemAssetList"):this.globalMap.operationRoleMap.maintain.code.indexOf(a)>-1&&("router"===e?t.push("/maintain/workbench/datashareimport"):t("/maintain/workbench/datashareimport"))}else this.destroyUser(t,e)},generateMixed:function(t){for(var e="",a=0;a<t;a++){var n=Math.ceil(35*Math.random());e+=this.chars[n]}return e},getDefaultRegistrationData:function(t){return this.globalMethod.deepCopy({file:[],fieldAddType:"field",infomationItems:t?[{time:0,zhName:"",enName:"",itemDescribe:"",objectType:"人员类",dataType:"VARCHAR",dataLength:1,isDictionary:"否",isNull:"是",isPrimary:"否",defaultValue:"",sharingType:"有条件共享",sharingCondition:"",sharingModeType:"共享平台",sharingMode:"接口",sharingModeTemp:["接口","数据库"],isOpen:"是",openCondition:""}]:[],infoResName:"",infoResFormatType:"数据库",infoResFormatValue:"mysql",topicType:"",topicTypeTemp:[],keyAreaType:"",keyAreaTypeTemp:[],systemName:"",sharingType:"有条件共享",sharingCondition:"",sharingModeType:"共享平台",sharingModeTypeTemp:["共享平台"],sharingMode:"接口,数据库",sharingModeTemp:["接口","数据库"],isOpen:"是",openCondition:"",updateCycle:"每日",relationResourceCode:""})},turnObjToArray:function(t){var e=[];for(var a in t)e.push(t[a+""]);return e},checkAdmin:function(){var t=JSON.parse(localStorage.getItem("user_info")),e=t.roles[0].privileges;if(t){var a=!1;return e.forEach(function(t,e,n){a="cmp_edit_all"==t.privilegeCode&&!a}),a}return!1},dateFormat:function(t,e,a,n){if(null!=t[e.property]){var r=new Date(a);return r.getFullYear()+"/"+(r.getMonth()+1)+"/"+r.getDate()+" "+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds()}}}}),Vt=a("G0J2"),Ht=a.n(Vt);a("3f40"),a("4qOc"),a("+cgv");n.default.use(At.a,Rt.a),n.default.config.productionTip=!1,n.default.use(zt.a),n.default.use(Mt.a),n.default.use(Dt.a),n.default.use(Ht.a),n.default.prototype.globalMethod=It,n.default.prototype.Cookies=_.a;var Qt=new Dt.a({routes:Pt});new n.default({router:Qt,components:{App:u},template:"<App/>"}).$mount("#app")},WiSC:function(t,e){},b5dH:function(t,e){},fUwT:function(t,e){},pR9r:function(t,e){},pzOL:function(t,e){},q0SG:function(t,e){},r4FR:function(t,e){},rZLD:function(t,e){},s8cc:function(t,e){},tvR6:function(t,e){},x9qr:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.ea6d03d80401cb7d4e0d.js.map